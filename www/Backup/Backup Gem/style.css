:root {
    --bg: #0b0c10; --card: rgba(255, 255, 255, 0.05); --border: rgba(255, 255, 255, 0.1); --accent: #3498db; --text: #ffffff; --text-dim: #999;
    --liq-0: linear-gradient(to top, #c0392b, #e74c3c); 
    --liq-25: linear-gradient(to top, #d35400, #e67e22); 
    --liq-50: linear-gradient(to top, #2980b9, #3498db); 
    --liq-75: linear-gradient(to top, #2ecc71, #27ae60); 
    --liq-100: linear-gradient(to top, #145a32, #1e8449);
    --rainbow: linear-gradient(to bottom, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);
    --lava: linear-gradient(to top, #200000, #ff4500, #ff8c00);
}

[data-theme="light"] { --bg: #f2f2f7; --card: #ffffff; --border: #d1d1d6; --accent: #007aff; --text: #1c1c1e; --text-dim: #8e8e93; }

body { margin: 0; background-color: var(--bg); color: var(--text); font-family: -apple-system, system-ui, sans-serif; min-height: 100vh; display: flex; justify-content: center; overflow-x: hidden; }

.app-container { width: 100%; max-width: 480px; padding: 20px; box-sizing: border-box; }
.glass-card { background: var(--card); backdrop-filter: blur(25px); border: 1px solid var(--border); border-radius: 24px; padding: 20px; margin-bottom: 20px; }

.pill-nav { display: flex; background: var(--card); padding: 5px; border-radius: 50px; margin-bottom: 20px; gap: 5px; border: 1px solid var(--border); }
.nav-item { flex: 1; border: none; background: transparent; color: var(--text-dim); padding: 12px; border-radius: 50px; cursor: pointer; font-weight: 700; font-size: 0.85rem; transition: 0.3s; }
.nav-item.active { background: var(--accent); color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }

.vases-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; align-items: flex-end; }
.vase-card { background: var(--card); border: 1px solid var(--border); border-radius: 30px; padding: 15px; text-align: center; position: relative; overflow: visible; }
.vase-container { margin: 10px auto; border: 3px solid rgba(255, 255, 255, 0.2); border-top: none; border-radius: 0 0 40px 40px; position: relative; overflow: hidden; background: rgba(0,0,0,0.1); z-index: 5; }
.liquid { position: absolute; bottom: 0; width: 100%; transition: height 1.2s cubic-bezier(0.4, 0, 0.2, 1), background 0.5s ease; }

.liquid.p-0 { background: var(--liq-0); }
.liquid.p-25 { background: var(--liq-25); }
.liquid.p-50 { background: var(--liq-50); }
.liquid.p-75 { background: var(--liq-75); }
.liquid.p-100 { background: var(--liq-100); }
.liquid.p-over-rainbow { background: var(--rainbow); background-size: 100% 400%; animation: rainbowCycle 3s linear infinite; }
.liquid.p-over-lava { background: var(--lava); background-size: 100% 200%; animation: rainbowCycle 2s linear infinite; }

@keyframes rainbowCycle { 0% { background-position: 0% 0%; } 100% { background-position: 0% 100%; } }

.drip { position: absolute; top: 50px; width: 8px; border-radius: 5px; z-index: 1; opacity: 0; }
.vase-card.overflowing .drip { background: var(--rainbow); background-size: 100% 400%; animation: spill 1.5s forwards, rainbowCycle 3s linear infinite; }
.vase-card.malus-overflowing .drip { background: var(--lava); background-size: 100% 200%; animation: spill 1.5s forwards, rainbowCycle 2s linear infinite; }
.drip.left { left: calc(50% - 40px); } .drip.right { right: calc(50% - 40px); }
@keyframes spill { 0% { height: 0; opacity: 1; } 100% { height: 150px; opacity: 1; } }

.fx-layer { position: absolute; top: 15%; left: 50%; width: 0; height: 0; z-index: 10; pointer-events: none; }

/* Fireworks Explosion (Bonus) - MODIFIÃ‰: Plus proche */
.vase-card.overflowing .fx-layer::before {
    content: 'âœ¨'; position: absolute;
    text-shadow: -30px -40px #ff0, 30px -40px #f0f, -50px 20px #0ff, 50px 20px #0f0, 0px -60px #fff;
    animation: explodeMadness 1.2s infinite; font-size: 1.2rem;
}
@keyframes explodeMadness {
    0% { transform: scale(0); opacity: 1; }
    50% { opacity: 1; }
    /* Valeurs de text-shadow et scale rÃ©duites pour rester proche du vase */
    100% { transform: scale(1.8); opacity: 0; text-shadow: -35px -50px #ff0, 35px -50px #f0f, -60px 25px #0ff, 60px 25px #0f0, 0px -75px #fff; }
}

/* Skulls (Malus) */
.vase-card.malus-overflowing .fx-layer::before { content: 'ðŸ’€'; position: absolute; animation: skullFly 2.5s infinite; font-size: 1.5rem; left: -10px; }
@keyframes skullFly { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(-120px) rotate(360deg); opacity: 0; } }

/* PLANNING */
.cal-day-row { border-bottom: 1px solid var(--border); padding: 15px 0; }
.cal-day-name { font-weight: 900; color: var(--accent); font-size: 0.85rem; margin-bottom: 12px; border-left: 4px solid var(--accent); padding-left: 10px; }
.cal-inputs-row { display: grid; grid-template-columns: repeat(auto-fill, minmax(85px, 1fr)); gap: 12px; }
.cal-inputs-row div { background: rgba(255,255,255,0.03); padding: 8px; border-radius: 12px; border: 1px solid var(--border); }
.cal-inputs-row label { font-size: 0.65rem; font-weight: 700; opacity: 0.8; display: block; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.cal-inputs-row input { width: 100%; background: var(--bg); border: 1px solid var(--border); color: var(--text); padding: 8px; border-radius: 8px; font-size: 0.9rem; text-align: center; box-sizing: border-box; }

/* MODALS */
.modal { display: none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); align-items: center; justify-content: center; backdrop-filter: blur(12px); }
.modal-content { background: var(--bg); padding: 30px; border-radius: 35px; width: 85%; max-width: 360px; border: 1px solid var(--border); text-align: center; }
.btn-primary { background: var(--accent); border-radius: 50px; padding: 15px; color: white; border: none; width: 100%; font-weight: 800; }
.btn-secondary { background: transparent; color: #ff3b30; border: none; font-weight: 700; width: 100%; margin-top: 10px; }